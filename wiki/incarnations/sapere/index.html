<!DOCTYPE HTML>
<!--
    Editorial by HTML5 UP
    html5up.net | @ajlkn
    Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
<head>






<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
<meta name="generator" content="Orchid 0.21.1"/>
<link rel="icon" href="https://alchemistsimulator.github.io/latest/favicon.ico">


<meta name="robots" content="index, follow">



<title>Alchemist SAPERE incarnation</title>


<meta name="description" content="An extensible simulator for doing science and engineering in pervasive, bio-inspired, and aggregate computing.">



<link rel="prev" href="https://alchemistsimulator.github.io/latest/wiki/incarnations/protelis">


<link rel="next" href="https://alchemistsimulator.github.io/latest/wiki/incarnations/scafi">


<!-- start:inject styles -->
<link rel="stylesheet" type="text/css" href="https://alchemistsimulator.github.io/latest/Editorial/8d6fb5b0/assets/css/editorial_main.css"  />
<link rel="stylesheet" type="text/css" href="https://alchemistsimulator.github.io/latest/Editorial/8d6fb5b0/assets/css/editorial_orchidCustomizations.css"  />
<link rel="stylesheet" type="text/css" href="https://alchemistsimulator.github.io/latest/Editorial/8d6fb5b0/assets/css/orchidSearch.css"  />
<link rel="stylesheet" type="text/css" href="https://alchemistsimulator.github.io/latest/Editorial/8d6fb5b0/assets/css/pygments.css"  />
<link rel="stylesheet" type="text/css" href="https://rawgit.com/PrismJS/prism-themes/master/themes/prism-ghcolors.css"  />
<!-- end:inject styles -->





<!-- start:debug info -->

<!-- THEME -->
<!-- Type: Editorial -->
<!-- Class: com.eden.orchid.editorial.EditorialTheme -->

<!-- PAGE -->
<!-- Type: wiki -->
<!-- Class: com.eden.orchid.wiki.pages.WikiPage -->
<!-- Layout: index -->
<!-- Resolved Layout: templates/layouts/index.peb -->
<!-- Page Template: wiki, page -->
<!-- Resolved Page Template: templates/pages/page.peb -->

<!-- RESOURCE -->
<!-- Class: com.eden.orchid.api.resources.resource.FileResource -->
<!-- Source Filename: wiki/incarnations/sapere.md -->

<!-- COMPLETE PAGE CONFIGURATION -->
<script>
    window.allData = {"reference":{"path":"wiki/incarnations","baseUrl":"https://alchemistsimulator.github.io/latest","fileName":"sapere","extension":"html","usePrettyUrl":true,"link":"https://alchemistsimulator.github.io/latest/wiki/incarnations/sapere"},"next":{"path":"wiki/incarnations","baseUrl":"https://alchemistsimulator.github.io/latest","fileName":"scafi","extension":"html","usePrettyUrl":true,"link":"https://alchemistsimulator.github.io/latest/wiki/incarnations/scafi"},"previous":{"path":"wiki/incarnations","baseUrl":"https://alchemistsimulator.github.io/latest","fileName":"protelis","extension":"html","usePrettyUrl":true,"link":"https://alchemistsimulator.github.io/latest/wiki/incarnations/protelis"},"description":"","title":"Alchemist SAPERE incarnation"};
</script>

<!-- end:debug info -->



<script>
    window.site = {"orchidVersion":"0.21.1","baseUrl":"https://alchemistsimulator.github.io/latest","environment":"debug","version":"11.3.1-dev5f+1cbd4bfb7"};
</script>


    <!-- start:inject meta-components [head] -->
    
    <!-- end:inject meta-components [head] -->



    <!-- start:inject meta-components [head] -->
    
    <!-- end:inject meta-components [head] -->







</head>
<body class="is-loading">





    <!-- start:inject meta-components [bodyStart] -->
    
    <!-- end:inject meta-components [bodyStart] -->



    <!-- start:inject meta-components [bodyStart] -->
    
    <!-- end:inject meta-components [bodyStart] -->





<!-- Wrapper -->
<div id="wrapper">

    <!-- Main -->
    <div id="main">
        <div class="inner">

            <!-- Header -->
            
                <header id="header">
    <a href="https://alchemistsimulator.github.io/latest" class="logo">The Alchemist Simulator</a>
    <ul class="icons">
    
    
        <li>
            <a href="https://github.com/AlchemistSimulator/Alchemist" class="icon fa-github">
                <span class="label">github</span>
            </a>
        </li>
    
    
    </ul>
</header>

            
            
            
            
                <section id="pageContent">
                    <header class="major"><h2>Alchemist SAPERE incarnation</h2></header>
                    <article>
                        
    <!-- start:inject components -->
    
        
            
                
                    
                        <p>The SAPERE incarnation for Alchemist was the first stable incarnation produced for the simulator.
It was developed in the context of the <a href="http://archive.ph/umlcC">SAPERE EU project</a>.</p>
<p>At the core of <a href="https://doi.org/10.1016/j.pmcj.2014.12.002">SAPERE</a> was the concept of <em>Live Semantic Annotation</em> (LSA),
namely a description of a resource (sensor, service, actuator...) always mapping the current resource status
(somewhat a prelude to the currently famous <a href="http://archive.ph/YR1v9">digital twin</a> concept).</p>
<p>These annotations evolve following so-called <em>Eco-Laws</em>,
mimicking the complex behaviours of natural ecosystems.</p>
<p>The SAPERE approach fostered subsequent approaches, such as <a href="https://doi.org/10.1109/MC.2015.261">aggregate computing</a>.</p>
<h2 id="live-semantic-annotations"><a href="#live-semantic-annotations" id="live-semantic-annotations" class="anchor"></a>Live Semantic Annotations</h2>
<p>An LSA as modeled in Alchemist is a tuple of values.
These tuples can be injected in nodes as data items.
From the point of view of <a href="https://alchemistsimulator.github.io/latest/wiki/understand/metamodel">the Alchemist metamodel</a>,
the concept of Molecule is mapped to LSA.
As a consequence, LSAs can be inserted in nodes.
For instance, the following code creates an irregular grid of devices,
of which those located around the center of such grid contain the tuple <code>{ token }</code>:</p>
<script src="https://gist-it.appspot.com/github/AlchemistSimulator/SAPERE-incarnation-tutorial/blob/master/src/main/yaml/05-content.yml"></script>
<p>The relevant part here is <code>molecule: token</code>.
If we wanted to inject the tuple <code>{ foo, 1, bar, 2 }</code>, we could have written <code>molecule: foo, 1, bar, 2</code>.</p>
<h3 id="ground-lsa-syntax"><a href="#ground-lsa-syntax" id="ground-lsa-syntax" class="anchor"></a>Ground LSA syntax</h3>
<pre><code>GroundLSA ::= GroundArgument (',' GroundArgument)*
GroundArgument ::= Number | Atom | Set
Atom ::= [a-z]([a-z]|[A-Z]|[0-9])*
Number ::= [0-9]+('.'[0-9]*)
Set ::= '[' ((Atom | Number)';')* ']'
</code></pre>
<p>LSAs, similarly to Prolog terms, support <a href="http://archive.ph/oLSpq">unification and substitution</a>:
it is possible to create tuple templates,
match them against sets of ground tuples,
and obtain a matching ground tuple as result.</p>
<p>A tuple argument is considered a variable if it begins with an uppercase letter.
Additionally, it is possible to discard some matches by expressing constraints on values.</p>
<h3 id="lsa-syntax"><a href="#lsa-syntax" id="lsa-syntax" class="anchor"></a>LSA Syntax</h3>
<pre><code>LSA ::= '{' GroundLSA | TemplateLSA '}'
TemplateLSA ::= Argument (',' Argument)*
Argument ::= GroundArgument | Variable | Constraint
Variable ::= [A-Z]([a-z]|[A-Z]|[0-9])*
Constraint ::= 'def:' Variable Operation
Operation ::= ('&gt;'|'&gt;'|'='|'!=') Number | 'add ' Variable | 'del ' Variable
</code></pre>
<h2 id="eco-laws"><a href="#eco-laws" id="eco-laws" class="anchor"></a>Eco-Laws</h2>
<p>Tuple matching is used to define <em>Eco-Laws</em>.
An Eco-Law is a rewriting rule very similar in concept to chemical reactions:
elements on the left-hand side of the reaction are removed from the container,
elements on the right hand side are inserted instead.</p>
<p>The following program matches LSAs with two arguments, the former must be <code>foo</code>,
the latter a number greater than <code>30</code>, and produces in a new tuple having as first element <code>bar</code> and as second
the opposite of the matched number:</p>
<p><code>{ foo, def: N &gt; 30 } --&gt; { bar, -N }</code></p>
<p>Nodes can be programmed with Eco-Laws as follows:</p>
<script src="https://gist-it.appspot.com/github/AlchemistSimulator/SAPERE-incarnation-tutorial/blob/master/src/main/yaml/06-send.yml"></script>
<h3 id="sharing"><a href="#sharing" id="sharing" class="anchor"></a>Sharing</h3>
<p>Eco-Laws can be programmed to send LSAs to neighbors, as well as to look into neighboring nodes for getting LSAs.
In order to do so, the LSA template in the Eco-Law must be preceded by a neighbor operator, either <code>+</code> or <code>*</code>.</p>
<p><code>+</code> means <em>in a neighbor</em>:
if used on the left hand side,
it considers the condition satisfied if at least one neighbor has at least one LSA matching the provided template;
if used on the right hand side,
sends the LSA to one random neighbor.</p>
<p><code>*</code> means <em>in all neighbors</em>:
if used on the left hand side,
it considers the condition satisfied if all neighbors have at least one LSA matching the provided template;
if used on the right hand side,
sends a copy of the LSA to all neighbors.</p>
<p>The following code exemplifies a diffusion program:
when <code>{ token }</code> is present locally, it is copied into neighboring nodes once per second;
and as soon as two copies of <code>{ token }</code> are present, one gets removed.</p>
<script src="https://gist-it.appspot.com/github/AlchemistSimulator/SAPERE-incarnation-tutorial/blob/master/src/main/yaml/09-diffuse.yml"></script>
<h3 id="eco-laws-syntax"><a href="#eco-laws-syntax" id="eco-laws-syntax" class="anchor"></a>Eco-Laws syntax</h3>
<h3 id="rates"><a href="#rates" id="rates" class="anchor"></a>Rates</h3>
<p>The time distribution with which reactions should get scheduled can be controlled by thinkering with the yaml specification
as per every reaction in Alchemist.
If no time distribution is specified,
the Eco-Law is assumed to run &quot;as soon as possible&quot; (ASAP).</p>
<p>This may lead to unwanted behaviour.
For instance, programming a single node with:
<code>--&gt; { foo }</code>
will cause the simulation to schedule a reaction producing <code>{ foo }</code> at time zero,
and at each execution the time will remain zero:
the simulator will be producing copies over copies of the tuple,
never advancing in time (Alchemist is a discrete event simulator),
and possibly going on until the JVM memory limit is reached.</p>
<p>If a number is specified as time distribution, using the <code>time-distribution</code> key,
then it will be interpreted as the <a href="https://en.wikipedia.org/wiki/Markov_chain">Markovian rate</a>
of an <a href="https://en.wikipedia.org/wiki/Exponential_distribution">exponentially distributed time</a>.</p>
<p>Other distributions can be used leveraging the <code>type</code>/<code>parameters</code> syntax.</p>
<p>In the following example, two Eco-Laws are configured, and one of them is bound to an
exponentially distributed time with rate 1, namely, such reaction,
when executable (the left hand LSAs have local matches), will execute at an average of once per second
(with a variance of 1 sÂ²).</p>
<script src="https://gist-it.appspot.com/github/AlchemistSimulator/SAPERE-incarnation-tutorial/blob/master/src/main/yaml/06-send.yml"></script>
<h2 id="tutorial-and-exercises"><a href="#tutorial-and-exercises" id="tutorial-and-exercises" class="anchor"></a>Tutorial and exercises</h2>
<p>To better grasp details of the incarnation, we recommend looking at the examples available on
<a href="https://github.com/AlchemistSimulator/SAPERE-incarnation-tutorial">the Alchemist SAPERE Incarnation tutorial on GitHub</a>.</p>
<p>Besides examples with growing complexity,
there are a number of proposed exercises that should help you getting acquainted with the SAPERE way of writing self-organizing behaviors.</p>

                    
                
            
        
            
        
    
    <!-- end:inject components -->


                    </article>
                </section>
            
        </div>
        <hr>

        <!-- Page Footer -->
        <div class="inner">
    <footer id="footer">
        <div class="clearfix">
            
                <div class="float-left">
                    <a href="https://alchemistsimulator.github.io/latest/wiki/incarnations/protelis" class="button special small pill">
                        <span>&larr;</span> Alchemist Protelis incarnation
                    </a>
                </div>
            
            
                <div class="float-right">
                    <a href="https://alchemistsimulator.github.io/latest/wiki/incarnations/scafi" class="button special small pill">
                        Alchemist ScaFi incarnation<span>&rarr;</span>
                    </a>
                </div>
            
        </div>
    </footer>
</div>

    </div>

    <!-- Sidebar -->
    <div id="sidebar">
    <div class="inner">

        <!-- Search -->
        <section id="search" class="alt">
            <form data-orchid-search="">
                <input type="text" name="query" id="query" placeholder="Search"/>
            </form>
            <div class="box" id="search-results" data-orchid-search-results style="display: none;">
                <b>Search Results</b>
                <ul></ul>
            </div>
            <div class="box" id="search-progress" data-orchid-search-progress style="display: none;">
                <div class="loader">Loading...</div>
            </div>
        </section>

        <!-- Menu -->
        <nav id="siteNav" class="menu">
            <header class="major">
                <h2>The Alchemist Simulator</h2>
            </header>
            <ul class="top-level">
                
                    
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest">Home</a>
    </li>
    

                
                    
    
    <li>
        <a class="subheader">Documentation</a>
    </li>
    

                
                    
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/superquick">SUPER-QUICK Start</a>
    </li>
    

                
                    
    <li>
        <span class="opener">Understand The Simulator</span>
        <ul>
        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/understand/metamodel">The Alchemist Simulator metamodel</a>
    </li>
    

        
        </ul>
    </li>

                
                    
    <li>
        <span class="opener">Prepare And Run</span>
        <ul>
        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/prepare/requirements">Requirements</a>
    </li>
    

        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/prepare/quickstart">Quick start</a>
    </li>
    

        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/prepare/run-gradle">Running Alchemist via Gradle</a>
    </li>
    

        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/prepare/run-stand-alone">Running Alchemist stand-alone</a>
    </li>
    

        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/prepare/default-gui">Alchemist graphical interface</a>
    </li>
    

        
        </ul>
    </li>

                
                    
    <li>
        <span class="opener">Writing Simulations</span>
        <ul>
        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/use/basics">Basics of an Alchemist simulation</a>
    </li>
    

        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/use/dry">Don&#39;t repeat yourself</a>
    </li>
    

        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/use/coordination-2021-tutorial">Tutorial from Coordination 2021</a>
    </li>
    

        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/use/yaml-variables">Using variables</a>
    </li>
    

        
        </ul>
    </li>

                
                    
    <li>
        <span class="opener">Incarnations In Detail</span>
        <ul>
        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/incarnations/biochemistry">Alchemist biochemistry incarnation</a>
    </li>
    

        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/incarnations/protelis">Alchemist Protelis incarnation</a>
    </li>
    

        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/incarnations/sapere">Alchemist SAPERE incarnation</a>
    </li>
    

        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/incarnations/scafi">Alchemist ScaFi incarnation</a>
    </li>
    

        
        </ul>
    </li>

                
                    
    <li>
        <span class="opener">Advanced Components</span>
        <ul>
        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/advanced/indoor">Indoor environments</a>
    </li>
    

        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/advanced/maps">Maps and GPS traces</a>
    </li>
    

        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/advanced/graphstream">Graph-based deployments</a>
    </li>
    

        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/advanced/navigation-graphs">Pathfinding and navigation meshes</a>
    </li>
    

        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/advanced/cognitive-pedestrians">Cognitive Pedestrians</a>
    </li>
    

        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/advanced/smartcam">With Smart Cameras</a>
    </li>
    

        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/advanced/customization">Writing custom components</a>
    </li>
    

        
        </ul>
    </li>

                
                    
    <li>
        <span class="opener">Data Export And Batches</span>
        <ul>
        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/export/export">Exporting data</a>
    </li>
    

        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/export/batch">Executing batches</a>
    </li>
    

        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/export/grid">Grid computing support</a>
    </li>
    

        
        </ul>
    </li>

                
                    
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/issues">Known issues: troubleshooting</a>
    </li>
    

                
                    
    <li>
        <span class="opener">Examples From The Literature</span>
        <ul>
        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/literature/protelis">With Protelis</a>
    </li>
    

        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/literature/scafi">With Scafi</a>
    </li>
    

        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/literature/maps">On maps</a>
    </li>
    

        
        </ul>
    </li>

                
                    
    <li>
        <span class="opener">Develop</span>
        <ul>
        
            
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/develop/import">Requirements and installation</a>
    </li>
    

        
        </ul>
    </li>

                
                    
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/wiki/license">License</a>
    </li>
    

                
                    
    
    <li>
        <a class="subheader">API Docs</a>
    </li>
    

                
                    
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/javadoc/index.html">Javadoc</a>
    </li>
    

                
                    
    
    <li>
        <a href="https://alchemistsimulator.github.io/latest/html/index.html">Kdoc</a>
    </li>
    

                
            </ul>
        </nav>
        

        <!-- Section -->
        <section>
            <p class="text-center">
                Currently 11.3.1-dev5f+1cbd4bfb7. Created with <a href="https://orchid.run">Orchid </a> and <b>Orchid Editorial Theme</b>.
            </p>
        </section>

        <!-- Footer -->
        <footer id="footer">
            <p class="copyright text-center">&copy; The Alchemist Simulator. All rights reserved.<br>Design by <a href="https://html5up.net">HTML5 UP</a></p>
        </footer>

    </div>
</div>

</div>






    <!-- start:inject meta-components [bodyEnd] -->
    
    <!-- end:inject meta-components [bodyEnd] -->



    <!-- start:inject meta-components [bodyEnd] -->
    
    <!-- end:inject meta-components [bodyEnd] -->




<!-- start:inject scripts -->
<script  src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/skel/3.0.1/skel.min.js"></script>
<script  src="https://alchemistsimulator.github.io/latest/Editorial/8d6fb5b0/assets/js/editorial_util.js"></script>
<script  src="https://alchemistsimulator.github.io/latest/Editorial/8d6fb5b0/assets/js/editorial_main.js"></script>
<script  src="https://alchemistsimulator.github.io/latest/Editorial/8d6fb5b0/assets/js/editorial_orchidCustomizations.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/prism.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-kotlin.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-java.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-groovy.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-yaml.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-asciidoc.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-markdown.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-python.min.js"></script>
<!-- end:inject scripts -->


</body>
</html>
